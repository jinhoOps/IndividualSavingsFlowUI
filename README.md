# IndividualSavingsFlowUI
개인의 수입·지출·저축·투자 흐름을 노드/링크 기반으로 모델링하고, 대시보드에서 흐름을 시각화하며, 시뮬레이션으로 N년 후 현금흐름 변화를 빠르게 확인하는 WebUI.

## 문제 정의
- 가계부/스프레드시트는 항목은 잘 쌓이지만, 흐름(어디서 벌어 어디로 새는지)과 미래 영향(몇 년 뒤 현금흐름/적립금)이 직관적으로 안 보입니다.
- 지출/저축/투자 구조를 “그래프(노드/링크)”로 표현하고, 요약 카드와 시뮬레이션으로 의사결정 단위를 낮춥니다.

## 목표
- 노드/링크로 자산 흐름을 구성하고 즉시 시각화
- 핵심 지표를 요약 카드로 상시 노출
- 월 잔여금/적립금을 기준으로 N년 후 현금흐름 영향 계산
- 실질/명목 전환(inflation toggle)으로 현재가치 관점 제공
- 언제든 초기화(Reset)로 빠른 반복 실험

## 핵심 개념(도메인)
- Node: 돈의 출발/도착 또는 저장소를 의미하는 단위
  - 예: 월급, 고정지출, 변동지출, 비상금, 투자계좌, 연금, 부채상환
- Link: Node 간 흐름(배분/이체/지출)을 의미
  - 예: 월급 → 고정지출(정액), 월급 → 투자계좌(비율), 잔여금 → 비상금(상한까지)
- Scenario: 특정 시점/가정(인플레이션, 성장률, 규칙)을 적용한 시뮬레이션 실행 단위

## 주요 기능 기획

### 1) 노드 CRUD
- 노드 타입
  - Income(수입), Expense(지출), Bucket(적립/저축/현금성), Invest(투자), Debt(부채), Transfer(중간분배)
- 노드 필수 속성(최소)
  - 이름, 타입, 통화, 월 기준 금액(또는 0), 활성/비활성, 메모
- 노드 확장 속성(시뮬레이션용)
  - 증가율(연), 상한/하한(버킷), 우선순위, 고정/변동 플래그
- 동작
  - 생성/수정/삭제(참조 링크 존재 시 삭제 제한 또는 함께 삭제 옵션)
  - 복제(템플릿화), 비활성 토글(시뮬레이션에서 제외)

수용 기준
- 노드 생성 후 대시보드/흐름 그래프에 즉시 반영
- 노드 비활성 시 링크 계산에서 제외되며 시각화에서도 명확히 구분

### 2) 링크 CRUD
- 링크 유형
  - Fixed(정액), Percent(비율), RuleBased(규칙), CapFill(상한 채우기)
- 링크 필수 속성(최소)
  - From Node, To Node, 유형, 값(정액/비율), 우선순위, 활성/비활성
- 링크 옵션
  - 최소/최대(클램프), 적용 조건(예: 버킷이 상한 미만일 때만), 시작/종료 월
- 동작
  - 생성/수정/삭제, 우선순위 정렬(드래그 정렬)
  - 링크 유효성 검증(순환 참조 경고, From=To 금지 등)

수용 기준
- 동일 From에서 다수 링크가 존재할 때 우선순위대로 배분이 적용
- 규칙 링크는 조건을 만족할 때만 금액이 이동

### 3) 흐름 시각화 대시보드
- 뷰 구성(최소 2종)
  1) Flow Graph(노드-링크 그래프)
     - 노드 배치, 링크 두께=금액, hover 시 상세(월 금액/비율/조건)
     - 필터: 기간(기준월), 노드 타입, 활성만 보기, 통화
  2) Sankey 또는 Flow Summary(선택)
     - 수입 → 지출/저축/투자/부채로 분해된 한눈 보기
- 인터랙션
  - 노드 클릭: 해당 노드 인/아웃 흐름, 연결 링크 목록, 합계
  - 링크 클릭: 링크 설정 패널 열기(값/우선순위/조건 조정)
  - 시각화 상태 저장(최근 필터/선택 유지)

수용 기준
- 그래프만 봐도 현재 구조에서 “누수가 큰 곳/저축이 가는 곳”이 식별 가능
- 필터 변경 시 1초 내 화면 반영(목표)

### 4) 요약 카드 계산
- 기본 카드(권장)
  - 월 총수입
  - 월 총지출
  - 월 순현금흐름(수입-지출)
  - 월 저축/투자 합계
  - 저축률(저축/투자 ÷ 수입)
  - 잔여금(배분 후 남는 금액)
- 선택 카드(확장)
  - 버킷 총액(예: 비상금/현금성/투자평가액)
  - 부채상환액, 부채 잔액 추정(모델링 시)
  - 목표 달성 예상 시점(상한 채우기 기반)

수용 기준
- 노드/링크 변경 즉시 카드 값이 재계산되어 일관되게 맞음
- 카드 클릭 시 계산 근거(어떤 노드 합계인지) 확인 가능

### 5) 흐름 시뮬레이션
목표: 월 잔여금/적립금을 기준으로 N년 후 현금흐름 및 자산(버킷) 변화 영향 계산

입력
- 기간: N년(예: 1~40년)
- 기준월: 시뮬레이션 시작 월
- 가정값
  - 물가상승률(연) = 인플레이션 입력
  - 노드별 증가율(연) 옵션(수입 상승, 지출 상승 등)
  - 투자 수익률(연) 옵션(투자 노드 타입에만 적용)
  - 초기 버킷 잔액(적립금/현금성/투자 잔액)
- 규칙 적용
  - 링크 우선순위대로 월 단위 배분
  - 상한 채우기(CapFill)는 상한 도달 시 다음 우선순위로 잔여 이동

출력
- 월별/연별 시계열
  - 순현금흐름, 잔여금, 버킷 잔액, 투자 잔액(가정 수익률 반영)
- 요약
  - N년 후 총 자산(버킷+투자), 누적 순현금흐름, 목표 상한 달성 월
- 시각화
  - 라인: 버킷/투자/총자산 추이
  - 바: 월 현금흐름 구성(수입/지출/저축/투자)

수용 기준
- 같은 입력이면 항상 같은 결과(결정론)
- 링크 우선순위/조건/상한이 결과에 정확히 반영

### 6) 실질/명목 전환(inflation toggle)
- 명목(Nominal): 미래 금액을 현재 기준 인플레이션을 반영하지 않고 그대로 표시
- 실질(Real): 미래 금액을 기준월 가치로 환산하여 표시(현재가치 관점)

정의(권장)
- 실질값 = 명목값 ÷ (1 + 인플레이션율)^(경과연수)

수용 기준
- 토글 변경 시 시뮬레이션 결과의 표시만 전환(모델 파라미터는 동일)
- 카드/차트/테이블 모두 동일한 기준으로 전환

### 7) Reset 기능
- 범위
  - 전체 초기화: 모든 노드/링크/시나리오/설정 삭제
  - 데이터만 초기화: 노드/링크는 유지, 시뮬레이션 결과/기간/필터만 초기화
  - 샘플 로드: 기본 템플릿(월급/고정지출/변동지출/저축/투자) 즉시 생성
- 안전장치
  - 확인 다이얼로그, 되돌리기(선택: 마지막 상태 스냅샷 1회)

수용 기준
- Reset 후 상태가 명확히 초기화되고 잔존 데이터가 없어야 함
- 샘플 로드는 즉시 대시보드가 의미 있는 형태로 채워져야 함

## 사용자 플로우(최소)
1) 샘플 로드 또는 노드 생성
2) 링크로 배분 구조 구성(우선순위 정렬 포함)
3) 대시보드에서 흐름 확인, 카드로 누수/저축률 확인
4) 시뮬레이션에서 N년/인플레이션/수익률 입력 후 결과 확인
5) 구조 수정 → 다시 시뮬레이션 반복
6) 필요 시 Reset으로 빠른 재실험

## MVP 범위
- 노드/링크 CRUD
- 그래프 기반 흐름 시각화(기준월 1개)
- 요약 카드(기본 6개)
- 시뮬레이션(월 단위, N년, 인플레이션 토글 포함)
- Reset(전체/샘플 로드)

## 추후 확장(후순위)
- CSV 임포트(카드/은행/증권) 및 자동 카테고리 룰
- 멀티 시나리오 비교(2~3개 그래프 오버레이)
- 목표 관리(비상금 6개월치, 연금 납입 목표 등)
- 계정/통화 다중 지원 및 환율 시뮬레이션
- 사용자/인증, 데이터 동기화, 백업/복구

## 성공 기준(제품 관점)
- 사용자가 10분 내 자신의 월 흐름 구조를 모델링할 수 있음
- “월 잔여금/저축률/누수 지점”을 대시보드에서 즉시 식별 가능
- 동일 구조에서 가정값(인플레이션/수익률/상승률) 변화가 결과에 직관적으로 반영됨

# UPDATE

## 2025-12-29
- Create `UPDATE.md` to track development changes.
- 단계별 구현 계획을 정리해 MVP 진행 순서를 확정.
- Stage 1 기반 화면을 구축하고 샘플 데이터/요약 카드/흐름 리스트/간단 시뮬레이션 추정치를 렌더링하도록 초기 구현(`index.html`, `styles.css`, `app.js`).
- MVP 생태계를 빌드 없이 동작하는 Vanilla HTML/CSS/JS로 확정해 빠른 반복/검증 중심으로 진행.
- 주 수입(월급) 연봉상승률 입력 UI를 추가하고 샘플 데이터/노드 목록/시뮬레이션 누적 추정치에 반영.
- Stage 2 진행: 노드/링크 CRUD 폼, 검증 메시지, 우선순위 조정(↑↓), 활성 토글, 삭제/복제 동작을 구현.
- 링크 순환 참조 감지 경고를 추가하고 링크 입력 시 From=To 금지 및 버킷 상한 채우기 타입 검증을 적용.
- 폼 UX 보강: 필드별 인라인 오류 표시/하이라이트, 입력 툴팁, 링크 우선순위 드래그 정렬을 추가.
- 링크 우선순위 드래그에 자동 스크롤을 추가하고, 노드 폼 blur 검증/단축키 저장(Ctrl/⌘+Enter)을 지원.
- 흐름 그래프 하단에 노드/링크 패널을 좌우 분할 배치로 재구성.
- Stage 3 진행: 흐름 그래프에 필터(노드 타입/통화/활성)와 SVG 기반 노드/링크 시각화, hover 툴팁을 추가.
- Stage 3 보강: 그래프 레이아웃을 동적 컬럼/가중치 높이로 개선하고, 흐름 요약 뷰(바형 요약)를 추가.
- 시드머니(보유자산) 입력을 추가하고 시뮬레이션 총 자산 계산에 반영.
- 흐름 요약 뷰를 Sankey 스타일 좌→우 분해로 확장하고, 보유자산 성장률/투자수익률 옵션을 시뮬레이션에 반영.
- 그래프 레이아웃을 자동 스케일/간격 조절로 보정해 노드 겹침을 완화.
- 저축/투자를 지출로 통합하고, 핵심 지표를 월 총지출/저축률/투자율/잔여금으로 재구성.
- 샘플 데이터를 월 총수입 290, 고정지출 150, 변동지출 20 기준으로 조정.
- Sankey 요약 뷰의 간격/높이를 동적 스케일링해 겹침을 완화.
- 샘플 저축을 72만원(비상금 Fixed 링크) 기준으로 조정.
- 금액 입력을 만원 단위로 통일하고(입력값 × 1만 저장), 만원 미만은 계산 결과 표기만 허용하도록 UI/폼 변환 로직을 적용.
- 패널 컨트롤을 시뮬레이션 요약 위로 이동하고, 만원 단위 입력 안내 문구를 추가.

## 2025-12-30
- Stage 4 진행: 월 단위 시뮬레이션 엔진으로 수입 성장, 저축/투자 유입, 시드머니 성장/수익률을 월별로 반영.
- 실질/명목 토글에 맞춰 누적 지표를 인플레이션 할인값으로 계산하고 시뮬레이션 요약에 반영.
- 시뮬레이션 차트를 총자산 중심(명목/실질 + 성실 총자산)으로 재구성하고, 억/만 축/툴팁/범례 여유를 보정.
- 투자 노드 투자수익률 입력과 보유자산 성장/수익률 입력 이벤트를 연동해 즉시 반영.
- 기본 가정을 조정(인플레이션 2.5%, 보유자산 성장률 4.5%, 보유자산 투자수익률 11%, 연봉상승률 4%).
- UI 표현을 쉬운 용어로 정리(정액→금액, 버킷→저축통, 클램프→최소/최대 제한, 상한 채우기→목표 채우기).
- 성실 총자산을 저축/투자 성장률 0% + 보유자산 성장률=인플레이션(실질 기준) 시나리오로 정리.
- Sankey 흐름 요약 높이를 동적으로 확장(최소 320px, 최대 640px)하고 내부 밴드는 고정 스케일로 유지하도록 조정.
- Sankey 배경 오버플로우/상하 여백/간격을 보정해 겹침과 잘림을 완화.
- 흐름 요약 도넛 차트는 지출 항목만 표시하고, 도넛이 없을 때 Sankey를 단일 컬럼으로 표시.
- 노드/링크 패널 접기 토글을 추가하고 편집/추가 시 자동으로 펼쳐지도록 개선.

### 단계별 구현 계획
1. Stage 1: 기본 UI 스켈레톤, 샘플 데이터, 요약 카드, 흐름 리스트, 간단 시뮬레이션 추정
2. Stage 2: 노드/링크 CRUD UI, 유효성 검증, 우선순위 정렬 UX
3. Stage 3: 흐름 그래프 시각화, 필터/선택 상태 관리
4. Stage 4: 월 단위 시뮬레이션 엔진, 실질/명목 토글 반영, 차트 연결
5. Stage 5: Reset/샘플 로드 고도화, 설정 저장/복원, QA 정리
